<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CKD Pharmamorning</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <div class="logo-container">
                            <img src="/static/images/ckd-logo.jpg" alt="CKD Logo" class="logo-img">
                            <h2 class="text-white mb-0">CKD Pharmamorning</h2>
                            <p class="text-white-50 mt-2 mb-0 brand-subtitle">Better Life Through Better Medicine</p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <h4 class="text-secondary">ë§¤ì¼ ì•„ì¹¨, ì œì•½ ì—…ê³„ì˜ ìµœì‹  ì†Œì‹ì„ ë°›ì•„ë³´ì„¸ìš” âœ¨</h4>
                            <p class="text-muted mt-2">* CKDì œì•½ ì„ì§ì›ì„ ìœ„í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.</p>
                        </div>
                        
                        <div class="feature-list">
                            <ul class="mb-0">
                                <li><b>ë§¤ì¼ ì•„ì¹¨, ì œì•½ ë‰´ìŠ¤ ëª¨ìŒ</b></li>
                                <li><b>ë§¤ì£¼ ê¸ˆìš”ì¼, ì£¼ê°„ ë¦¬í¬íŠ¸ ì œê³µ</b></li>
                            </ul>
                        </div>
                        
                        <form id="subscribeForm" class="mt-4">
                            <div class="mb-3">
                                <label for="employeeId" class="form-label">ì‚¬ë²ˆ ğŸ†”</label>
                                <input type="text" class="form-control" id="employeeId" required
                                       placeholder="ì‚¬ë²ˆì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
                            </div>
                            <div class="mb-3">
                                <label for="name" class="form-label">ì´ë¦„ ğŸ‘¤</label>
                                <input type="text" class="form-control" id="name" required
                                       placeholder="ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">ì´ë©”ì¼ ì•„ì´ë”” âœ‰ï¸</label>
                                <div class="input-group">
                                    <input type="text" class="form-control" id="email" required
                                           placeholder="ì´ë©”ì¼ ì•„ì´ë””">
                                    <span class="input-group-text">@ckdpharm.com</span>
                                </div>
                                <small class="text-muted">* ì‚¬ë‚´ ë©”ì¼ ì£¼ì†Œë§Œ ë“±ë¡ ê°€ëŠ¥í•©ë‹ˆë‹¤.</small>
                            </div>
                            <div class="d-grid mt-4">
                                <button type="submit" class="btn btn-primary">ë‰´ìŠ¤ë ˆí„° êµ¬ë…í•˜ê¸° ğŸ‰</button>
                            </div>
                        </form>
                        
                        <div class="footer-text">
                            <p>ğŸ”’ ê°œì¸ì •ë³´ëŠ” ë‰´ìŠ¤ë ˆí„° ë°œì†¡ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤</p>
                            <p>ê¸°íƒ€ë¬¸ì˜ì‚¬í•­ì€ ì •ë³´ê¸°íšíŒ€ìœ¼ë¡œ ë¬¸ì˜ì£¼ì„¸ìš”. (ë‚´ì„ :332)</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('subscribeForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const emailId = document.getElementById('email').value;
            const formData = {
                employee_id: document.getElementById('employeeId').value,
                name: document.getElementById('name').value,
                email: `${emailId}@ckdpharm.com`
            };

            try {
                const response = await fetch('/subscribe/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                
                if (response.ok) {
                    alert('êµ¬ë… ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ë§¤ì¼ ì•„ì¹¨ ë‰´ìŠ¤ë ˆí„°ë¥¼ ë°›ì•„ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                    document.getElementById('subscribeForm').reset();
                } else {
                    alert(data.detail || 'êµ¬ë… ì‹ ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                alert('ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            }
        });
    </script>
</body>
</html>